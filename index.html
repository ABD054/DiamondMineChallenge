<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’ Ø¬ÙˆÙ‡Ø±Ø© Ø§Ù„Ø­Ø¸ ğŸ’£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', 'Segoe UI', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c0c0c, #1a1a2e, #16213e);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 119, 97, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(106, 13, 173, 0.1) 0%, transparent 50%);
            z-index: -1;
            animation: backgroundShift 20s ease-in-out infinite alternate;
        }

        @keyframes backgroundShift {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(-50px, 50px) scale(1.1); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(22, 22, 34, 0.85);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.7),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            overflow: hidden;
            animation: containerGlow 3s ease-in-out infinite alternate;
        }

        @keyframes containerGlow {
            0% { box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.7),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 0 30px rgba(106, 13, 173, 0.3); }
            100% { box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.7),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 0 50px rgba(120, 119, 198, 0.4); }
        }

        /* ========== ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ========== */
        .login-container {
            display: block;
        }

        .login-box {
            background: rgba(26, 26, 46, 0.9);
            padding: 50px;
            border-radius: 25px;
            max-width: 500px;
            margin: 100px auto;
            border: 2px solid rgba(120, 119, 198, 0.3);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .login-title {
            color: #00ff88;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .input-group {
            margin: 25px 0;
            text-align: right;
        }

        .input-label {
            display: block;
            color: #a0a0c0;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .input-field {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(120, 119, 198, 0.3);
            border-radius: 12px;
            color: white;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .input-field:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .login-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #00ff88, #00ccff);
            color: #0c0c0c;
            border: none;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 255, 136, 0.4);
        }

        .register-link {
            color: #a0a0c0;
            margin-top: 25px;
            font-size: 1em;
        }

        .register-link a {
            color: #00ccff;
            text-decoration: none;
            font-weight: bold;
        }

        .register-link a:hover {
            text-decoration: underline;
        }

        /* ========== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ========== */
        .user-bar {
            background: rgba(26, 26, 46, 0.8);
            padding: 15px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(120, 119, 198, 0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .username {
            color: #00ff88;
            font-weight: bold;
            font-size: 1.2em;
        }

        .balance {
            color: #00ccff;
            font-weight: bold;
            font-size: 1.3em;
        }

        .logout-btn {
            background: linear-gradient(45deg, #FF7761, #ff4444);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 119, 97, 0.3);
        }

        /* ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·) ========== */
        .admin-panel {
            background: rgba(0, 0, 0, 0.4);
            padding: 25px;
            border-radius: 20px;
            margin: 30px 0;
            border: 2px solid #ff4444;
            display: none;
        }

        .admin-title {
            color: #ff4444;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .admin-section {
            background: rgba(26, 26, 46, 0.7);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
        }

        .section-title {
            color: #00ccff;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .users-table th, .users-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid rgba(120, 119, 198, 0.2);
        }

        .users-table th {
            background: rgba(120, 119, 198, 0.2);
            color: #00ccff;
        }

        .admin-action-btn {
            padding: 8px 15px;
            margin: 5px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .ban-btn {
            background: #ff4444;
            color: white;
        }

        .add-balance-btn {
            background: #00ff88;
            color: #0c0c0c;
        }

        .remove-balance-btn {
            background: #FF9800;
            color: white;
        }

        /* ========== Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø­Ù† ========== */
        .charge-section {
            background: rgba(26, 26, 46, 0.8);
            padding: 25px;
            border-radius: 20px;
            margin: 30px 0;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .charge-input-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .charge-input {
            width: 250px;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            color: white;
            font-size: 1.1em;
            text-align: center;
        }

        .charge-btn {
            background: linear-gradient(45deg, #00ff88, #00ccff);
            color: #0c0c0c;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .charge-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.4);
        }

        .codes-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-top: 25px;
        }

        .codes-table {
            width: 100%;
            border-collapse: collapse;
        }

        .codes-table th, .codes-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .generate-code-btn {
            background: linear-gradient(45deg, #7877C6, #6a0dad);
            color: white;
            padding: 10px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 15px 0;
            transition: all 0.3s;
        }

        .generate-code-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(120, 119, 198, 0.4);
        }

        /* ========== Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ========== */
        .game-container {
            display: none;
        }

        .header {
            position: relative;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3.5em;
            background: linear-gradient(45deg, #7877C6, #6a0dad, #FF7761);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            text-shadow: 0 0 30px rgba(120, 119, 198, 0.3);
            position: relative;
            display: inline-block;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 25%;
            width: 50%;
            height: 3px;
            background: linear-gradient(90deg, transparent, #7877C6, transparent);
            border-radius: 2px;
        }

        .tagline {
            color: #a0a0c0;
            font-size: 1.2em;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(160, 160, 192, 0.3);
            animation: textPulse 2s ease-in-out infinite;
        }

        @keyframes textPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .stat-card {
            background: linear-gradient(145deg, rgba(26, 26, 46, 0.8), rgba(22, 22, 34, 0.9));
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(120, 119, 198, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: rgba(120, 119, 198, 0.4);
            box-shadow: 0 15px 35px rgba(120, 119, 198, 0.2);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(120, 119, 198, 0.05), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .stat-card:hover::before {
            transform: translateX(100%);
        }

        .stat-label {
            color: #a0a0c0;
            font-size: 1em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .stat-value {
            font-size: 2.8em;
            font-weight: bold;
            background: linear-gradient(45deg, #7877C6, #FF7761);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(120, 119, 198, 0.3);
        }

        .profit-positive {
            background: linear-gradient(45deg, #00ff88, #00ccff) !important;
        }

        .profit-negative {
            background: linear-gradient(45deg, #ff4444, #ff9966) !important;
        }

        .controls-section {
            background: rgba(26, 26, 46, 0.6);
            border-radius: 25px;
            padding: 35px;
            margin: 40px 0;
            border: 1px solid rgba(120, 119, 198, 0.15);
            position: relative;
        }

        .controls-section::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #7877C6, #6a0dad, #FF7761);
            border-radius: 27px;
            z-index: -1;
            opacity: 0.3;
            animation: borderGlow 3s ease-in-out infinite alternate;
        }

        @keyframes borderGlow {
            0% { opacity: 0.2; }
            100% { opacity: 0.4; }
        }

        .bet-control {
            margin: 30px 0;
        }

        .amount-display {
            font-size: 5em;
            color: #00ff88;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 0 0 30px rgba(0, 255, 136, 0.4);
            animation: amountGlow 2s ease-in-out infinite alternate;
        }

        @keyframes amountGlow {
            0% { text-shadow: 0 0 20px rgba(0, 255, 136, 0.4); }
            100% { text-shadow: 0 0 40px rgba(0, 255, 136, 0.6); }
        }

        .slider-container {
            width: 80%;
            margin: 30px auto;
        }

        input[type="range"] {
            width: 100%;
            height: 12px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #1a1a2e, #7877C6, #FF7761);
            border-radius: 10px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00ff88, #00ccff);
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
            border: 2px solid white;
            transition: all 0.3s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.8);
        }

        .custom-bet-input {
            margin: 25px 0;
        }

        .custom-amount {
            width: 200px;
            padding: 15px 25px;
            background: rgba(120, 119, 198, 0.1);
            border: 2px solid rgba(120, 119, 198, 0.3);
            border-radius: 15px;
            color: #00ff88;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            outline: none;
            transition: all 0.3s;
        }

        .custom-amount:focus {
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            background: rgba(120, 119, 198, 0.2);
        }

        .quick-bet-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .quick-bet {
            padding: 10px 20px;
            background: rgba(120, 119, 198, 0.15);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 10px;
            color: #a0a0c0;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            min-width: 70px;
        }

        .quick-bet:hover {
            background: rgba(120, 119, 198, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(120, 119, 198, 0.2);
        }

        .quick-bet.active {
            background: linear-gradient(45deg, #7877C6, #6a0dad);
            color: white;
            border-color: transparent;
            box-shadow: 0 0 20px rgba(120, 119, 198, 0.4);
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 40px 0;
        }

        .btn {
            padding: 18px 45px;
            border: none;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            min-width: 200px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-start {
            background: linear-gradient(45deg, #00ff88, #00ccff);
            color: #0c0c0c;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        .btn-start:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 255, 136, 0.5);
        }

        .btn-withdraw {
            background: linear-gradient(45deg, #FF7761, #ff4444);
            color: white;
            box-shadow: 0 10px 30px rgba(255, 119, 97, 0.3);
        }

        .btn-withdraw:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 40px rgba(255, 119, 97, 0.5);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin: 50px 0;
            perspective: 1000px;
        }

        .box {
            aspect-ratio: 1;
            background: linear-gradient(145deg, #1a1a2e, #2d2d44);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.8em;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .box::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%);
            transform: translateX(-100%) skewX(-15deg);
        }

        .box:hover:not(.revealed)::before {
            animation: boxShine 1.5s ease-in-out;
        }

        @keyframes boxShine {
            0% { transform: translateX(-100%) skewX(-15deg); }
            100% { transform: translateX(200%) skewX(-15deg); }
        }

        .box:hover:not(.revealed) {
            transform: translateY(-10px) rotateX(10deg) rotateY(10deg);
            box-shadow: 
                0 20px 40px rgba(120, 119, 198, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .box.revealed {
            cursor: default;
            transform: scale(0.95);
        }

        .box.revealed.gem {
            background: linear-gradient(145deg, #00ff88, #00cc88);
            animation: gemReveal 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .box.revealed.bomb {
            background: linear-gradient(145deg, #ff4444, #ff7761);
            animation: bombReveal 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes gemReveal {
            0% { transform: scale(0) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(0.95) rotate(360deg); }
        }

        @keyframes bombReveal {
            0% { transform: scale(1); }
            20%, 60% { transform: scale(1.1) rotate(5deg); }
            40%, 80% { transform: scale(1.1) rotate(-5deg); }
            100% { transform: scale(0.95); }
        }

        .multiplier-track {
            height: 25px;
            background: rgba(26, 26, 46, 0.8);
            border-radius: 12px;
            margin: 30px 0;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(120, 119, 198, 0.3);
        }

        .multiplier-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00ccff, #7877C6);
            width: 0%;
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .multiplier-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .multiplier-display {
            font-size: 1.5em;
            color: #00ccff;
            margin: 20px 0;
            text-shadow: 0 0 15px rgba(0, 204, 255, 0.5);
            animation: textGlow 2s ease-in-out infinite alternate;
        }

        @keyframes textGlow {
            0% { text-shadow: 0 0 10px rgba(0, 204, 255, 0.5); }
            100% { text-shadow: 0 0 20px rgba(0, 204, 255, 0.8); }
        }

        .game-info {
            background: rgba(26, 26, 46, 0.6);
            border-radius: 20px;
            padding: 30px;
            margin-top: 40px;
            border-left: 4px solid #7877C6;
        }

        .info-title {
            color: #00ccff;
            font-size: 1.4em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            text-align: right;
        }

        .info-item {
            color: #a0a0c0;
            padding: 10px 0;
            border-bottom: 1px solid rgba(120, 119, 198, 0.1);
            position: relative;
            padding-right: 15px;
        }

        .info-item::before {
            content: 'â–¸';
            position: absolute;
            right: 0;
            color: #7877C6;
        }

        .message-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(12, 12, 12, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .message-box {
            background: linear-gradient(145deg, #1a1a2e, #2d2d44);
            padding: 50px;
            border-radius: 30px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            border: 1px solid rgba(120, 119, 198, 0.3);
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.8),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: messagePop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
        }

        .message-box::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ff88, #00ccff, #7877C6, #FF7761);
            border-radius: 32px;
            z-index: -1;
            animation: messageBorder 3s linear infinite;
        }

        @keyframes messageBorder {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        @keyframes messagePop {
            0% { transform: scale(0) rotate(180deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .message-icon {
            font-size: 5em;
            margin-bottom: 20px;
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .message-title {
            font-size: 2.5em;
            background: linear-gradient(45deg, #00ff88, #00ccff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .message-text {
            font-size: 1.3em;
            line-height: 1.8;
            color: #a0a0c0;
            margin-bottom: 30px;
        }

        .message-btn {
            background: linear-gradient(45deg, #7877C6, #6a0dad);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 25px rgba(120, 119, 198, 0.3);
        }

        .message-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(120, 119, 198, 0.5);
        }

        @media (max-width: 768px) {
            .game-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .quick-bet-buttons {
                gap: 8px;
            }
            
            .quick-bet {
                padding: 8px 15px;
                font-size: 0.9em;
                min-width: 60px;
            }
            
            .users-table, .codes-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div class="container login-container" id="loginContainer">
        <div class="login-box">
            <div class="login-title">ğŸ’ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸ’£</div>
            
            <div class="input-group">
                <label class="input-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" class="input-field" id="loginUsername" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            </div>
            
            <div class="input-group">
                <label class="input-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" class="input-field" id="loginPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            
            <button class="login-btn" onclick="login()">ğŸš€ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            
            <div class="register-link">
                Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" onclick="showRegister()">Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</a>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
    <div class="container login-container" id="registerContainer" style="display: none;">
        <div class="login-box">
            <div class="login-title">ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</div>
            
            <div class="input-group">
                <label class="input-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" class="input-field" id="registerUsername" placeholder="Ø§Ø®ØªØ± Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù…">
            </div>
            
            <div class="input-group">
                <label class="input-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" class="input-field" id="registerPassword" placeholder="Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©">
            </div>
            
            <div class="input-group">
                <label class="input-label">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" class="input-field" id="registerConfirmPassword" placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            
            <button class="login-btn" onclick="register()">ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
            
            <div class="register-link">
                Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a href="#" onclick="showLogin()">Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="container game-container" id="gameContainer">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <div class="user-bar" id="userBar">
            <div class="user-info">
                <div class="username">ğŸ‘¤ <span id="currentUsername">Ù…Ø³ØªØ®Ø¯Ù…</span></div>
                <div class="balance">ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: $<span id="currentBalance">0</span></div>
            </div>
            <button class="logout-btn" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† (ØªØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ù„Ø£Ø¯Ù…Ù†) -->
        <div class="admin-panel" id="adminPanel">
            <div class="admin-title">ğŸ”§ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</div>
            
            <div class="admin-section">
                <div class="section-title">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                <div class="users-table-container">
                    <table class="users-table" id="usersTable">
                        <thead>
                            <tr>
                                <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                                <th>Ø§Ù„Ø±ØµÙŠØ¯</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="admin-section">
                <div class="section-title">ğŸ’° ØªØ¹Ø¯ÙŠÙ„ Ø±ØµÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù…</div>
                <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                    <input type="text" id="adminUsername" class="input-field" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" style="flex: 1;">
                    <input type="number" id="adminAmount" class="input-field" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" style="width: 150px;">
                    <button class="admin-action-btn add-balance-btn" onclick="adminAddBalance()">â• Ø¥Ø¶Ø§ÙØ©</button>
                    <button class="admin-action-btn remove-balance-btn" onclick="adminRemoveBalance()">â– Ø®ØµÙ…</button>
                    <button class="admin-action-btn ban-btn" onclick="adminBanUser()">ğŸš« Ø­Ø¸Ø±</button>
                </div>
            </div>

            <div class="admin-section">
                <div class="section-title">ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø´Ø­Ù†</div>
                <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap; margin-bottom: 15px;">
                    <input type="number" id="codeAmount" class="input-field" placeholder="Ù‚ÙŠÙ…Ø© Ø§Ù„ÙƒÙˆØ¯" style="width: 150px;">
                    <button class="generate-code-btn" onclick="generateChargeCode()">ğŸ« Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯</button>
                </div>
                
                <div class="codes-section">
                    <table class="codes-table" id="codesTable">
                        <thead>
                            <tr>
                                <th>Ø§Ù„ÙƒÙˆØ¯</th>
                                <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="codesTableBody">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø´Ø­Ù† -->
        <div class="charge-section">
            <div class="section-title">ğŸ’³ Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</div>
            <div class="charge-input-group">
                <input type="text" id="chargeCode" class="charge-input" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù†">
                <button class="charge-btn" onclick="useChargeCode()">âš¡ Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</button>
            </div>
            <div style="color: #a0a0c0; margin-top: 15px; font-size: 0.9em;">
                Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙƒÙˆØ§Ø¯ Ø´Ø­Ù†ØŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø£Ø¯Ù…Ù†
            </div>
        </div>

        <!-- Ø±Ø£Ø³ Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div class="header">
            <h1>ğŸ’ Ø¬ÙˆÙ‡Ø±Ø© Ø§Ù„Ø­Ø¸ ğŸ’£</h1>
            <div class="tagline">Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ± ÙˆØ§ØµÙ†Ø¹ Ø«Ø±ÙˆØªÙƒ!</div>
        </div>
        
        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">ğŸ’¼ Ø§Ù„Ø±Ù‡Ø§Ù† Ø§Ù„Ø£ØµÙ„ÙŠ</div>
                <div class="stat-value" id="originalAmount">$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ğŸ“ˆ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                <div class="stat-value" id="currentProfit">$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</div>
                <div class="stat-value" id="totalAmount">$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">âš¡ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù</div>
                <div class="stat-value" id="currentMultiplier">1.00x</div>
            </div>
        </div>

        <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="controls-section">
            <div class="bet-control">
                <div class="stat-label">ğŸ¯ Ø§Ø®ØªØ± Ù…Ø¨Ù„Øº Ø±Ù‡Ø§Ù†Ùƒ</div>
                <div class="amount-display" id="amountDisplay">$0</div>
                
                <div class="slider-container">
                    <input type="range" id="betSlider" min="0" max="100" value="0" step="1" disabled>
                </div>
                
                <div class="custom-bet-input">
                    <input type="number" 
                           id="customBetAmount" 
                           class="custom-amount" 
                           min="0" 
                           max="0" 
                           value="0"
                           placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº"
                           disabled>
                </div>
                
                <div class="quick-bet-buttons">
                    <div class="quick-bet" onclick="setBetAmount(1)" disabled>$1</div>
                    <div class="quick-bet" onclick="setBetAmount(5)" disabled>$5</div>
                    <div class="quick-bet" onclick="setBetAmount(10)" disabled>$10</div>
                    <div class="quick-bet" onclick="setBetAmount(25)" disabled>$25</div>
                    <div class="quick-bet" onclick="setBetAmount(50)" disabled>$50</div>
                    <div class="quick-bet" onclick="setBetAmount(100)" disabled>$100</div>
                </div>
            </div>
            
            <div class="multiplier-track">
                <div class="multiplier-fill" id="multiplierFill"></div>
            </div>
            
            <div class="multiplier-display" id="multiplierInfo">
                âš¡ Ø§Ù„Ø´Ø­Ù† Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡!
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-start" onclick="startGame()" id="startBtn" disabled>
                    ğŸ’° Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø£ÙˆÙ„Ø§Ù‹
                </button>
                <button class="btn btn-withdraw" onclick="withdraw()" id="withdrawBtn" disabled>
                    ğŸ’° Ø§Ù†Ø³Ø­Ø¨ Ø¨Ø£Ù…Ø§Ù†
                </button>
            </div>
        </div>

        <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div class="game-grid" id="gameGrid">
            <!-- Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø³ØªØ¶Ø§Ù Ù‡Ù†Ø§ -->
        </div>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div class="game-info">
            <div class="info-title">ğŸ® Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨</div>
            <div class="info-grid">
                <div class="info-item">ğŸ” 20 Ù…Ø±Ø¨Ø¹Ø§Ù‹ ØºØ§Ù…Ø¶Ø§Ù‹</div>
                <div class="info-item">ğŸ’ 17 Ø¬ÙˆÙ‡Ø±Ø© ÙƒØ§Ù…Ù†Ø©</div>
                <div class="info-item">ğŸ’£ 3 Ù‚Ù†Ø§Ø¨Ù„ Ù…Ø®ÙÙŠØ©</div>
                <div class="info-item">ğŸ“Š Ù…Ø¶Ø§Ø¹Ù ÙŠØµÙ„ Ø¥Ù„Ù‰ 3x</div>
                <div class="info-item">ğŸ’° Ø§Ù†Ø³Ø­Ø¨ Ù…ØªÙ‰ Ø´Ø¦Øª</div>
                <div class="info-item">ğŸ¯ ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©</div>
                <div class="info-item">ğŸ’³ Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ±</div>
                <div class="info-item">ğŸ”¢ Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø¹Ø¨Ø± Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</div>
                <div class="info-item">âœ¨ Ø§Ø·Ù„Ø¨ ÙƒÙˆØ¯ Ø´Ø­Ù† Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†</div>
                <div class="info-item">ğŸ† Ø±Ø¨Ø­ ÙˆØ§Ù‚Ø¹ÙŠ ÙˆØªØ¯Ø±ÙŠØ¬ÙŠ</div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
    <div class="message-overlay" id="messageOverlay">
        <div class="message-box">
            <div class="message-icon" id="messageIcon">ğŸ’</div>
            <div class="message-title" id="messageTitle">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</div>
            <div class="message-text" id="messageText">Ø§Ù„Ù†Øµ Ù‡Ù†Ø§</div>
            <button class="message-btn" onclick="closeMessage()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
        </div>
    </div>

    <!-- Ø§Ù„Ø£ØµÙˆØ§Øª -->
    <audio id="ambientSound" loop preload="auto">
        <source src="https://assets.mixkit.co/music/preview/mixkit-deep-ambient-492.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>
    <audio id="gemSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" type="audio/mpeg">
    </audio>
    <audio id="bombSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-bomb-explosion-2800.mp3" type="audio/mpeg">
    </audio>
    <audio id="winSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="cashSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-cash-flow-coin-1996.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ========== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ==========
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let chargeCodes = JSON.parse(localStorage.getItem('chargeCodes')) || [];
        let gameActive = false;
        let betAmount = 0;
        let originalBet = 0;
        let profit = 0;
        let multiplier = 1.0;
        let boxes = [];
        let gemsFound = 0;
        let boxesRevealed = 0;
        const totalBoxes = 20;
        const bombCount = 3;
        const gemCount = totalBoxes - bombCount;

        // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø¯Ù…Ù† Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        if (!users.find(u => u.username === 'abd')) {
            users.push({
                username: 'abd',
                password: 'oioioioi000',
                balance: 0,
                isAdmin: true,
                isBanned: false
            });
            localStorage.setItem('users', JSON.stringify(users));
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø¹Ø¶ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        if (chargeCodes.length === 0) {
            chargeCodes = [
                { code: 'START100', amount: 100, isUsed: false },
                { code: 'FIRST50', amount: 50, isUsed: false },
                { code: 'BONUS200', amount: 200, isUsed: false }
            ];
            localStorage.setItem('chargeCodes', JSON.stringify(chargeCodes));
        }

        // ========== Ø¹Ù†Ø§ØµØ± DOM ==========
        const loginContainer = document.getElementById('loginContainer');
        const registerContainer = document.getElementById('registerContainer');
        const gameContainer = document.getElementById('gameContainer');
        const userBar = document.getElementById('userBar');
        const adminPanel = document.getElementById('adminPanel');
        const currentUsername = document.getElementById('currentUsername');
        const currentBalance = document.getElementById('currentBalance');
        const usersTableBody = document.getElementById('usersTableBody');
        const codesTableBody = document.getElementById('codesTableBody');
        const gameGrid = document.getElementById('gameGrid');
        const originalAmount = document.getElementById('originalAmount');
        const currentProfit = document.getElementById('currentProfit');
        const totalAmount = document.getElementById('totalAmount');
        const currentMultiplier = document.getElementById('currentMultiplier');
        const amountDisplay = document.getElementById('amountDisplay');
        const betSlider = document.getElementById('betSlider');
        const customBetAmount = document.getElementById('customBetAmount');
        const multiplierFill = document.getElementById('multiplierFill');
        const multiplierInfo = document.getElementById('multiplierInfo');
        const startBtn = document.getElementById('startBtn');
        const withdrawBtn = document.getElementById('withdrawBtn');
        const messageOverlay = document.getElementById('messageOverlay');
        const messageIcon = document.getElementById('messageIcon');
        const messageTitle = document.getElementById('messageTitle');
        const messageText = document.getElementById('messageText');
        const quickBetButtons = document.querySelectorAll('.quick-bet');
        const ambientSound = document.getElementById('ambientSound');
        ambientSound.volume = 0.3;

        // ========== Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ==========
        function showLogin() {
            loginContainer.style.display = 'block';
            registerContainer.style.display = 'none';
        }

        function showRegister() {
            loginContainer.style.display = 'none';
            registerContainer.style.display = 'block';
        }

        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;

            const user = users.find(u => 
                u.username === username && 
                u.password === password
            );

            if (!user) {
                showMessage('âŒ Ø®Ø·Ø£', 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                return;
            }

            if (user.isBanned) {
                showMessage('ğŸš« Ù…Ø­Ø¸ÙˆØ±', 'Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±ØŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø£Ø¯Ù…Ù†');
                return;
            }

            currentUser = user;
            loginContainer.style.display = 'none';
            gameContainer.style.display = 'block';
            
            updateUserDisplay();
            if (currentUser.isAdmin) {
                adminPanel.style.display = 'block';
                updateUsersTable();
                updateCodesTable();
            }
            
            ambientSound.play().catch(() => {});
            
            if (currentUser.balance === 0) {
                showMessage('ğŸ’ Ù…Ø±Ø­Ø¨Ø§Ù‹!', `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${username}!<br>Ø±ØµÙŠØ¯Ùƒ: $0<br>ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø´Ø­Ù† Ø±ØµÙŠØ¯Ùƒ Ø£ÙˆÙ„Ø§Ù‹ Ø¹Ø¨Ø± ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù†`);
            } else {
                showMessage('ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹!', `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${username}!<br>Ø±ØµÙŠØ¯Ùƒ: $${currentUser.balance}<br>Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©`);
            }
        }

        function register() {
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (!username || !password) {
                showMessage('âš ï¸ ØªØ­Ø°ÙŠØ±', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }

            if (password !== confirmPassword) {
                showMessage('âš ï¸ ØªØ­Ø°ÙŠØ±', 'ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©');
                return;
            }

            if (users.find(u => u.username === username)) {
                showMessage('âš ï¸ ØªØ­Ø°ÙŠØ±', 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');
                return;
            }

            if (username.length < 3) {
                showMessage('âš ï¸ ØªØ­Ø°ÙŠØ±', 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                return;
            }

            if (password.length < 6) {
                showMessage('âš ï¸ ØªØ­Ø°ÙŠØ±', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                return;
            }

            const newUser = {
                username: username,
                password: password,
                balance: 0,
                isAdmin: false,
                isBanned: false
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            showMessage('âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„', 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!<br>Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ: $0<br>ÙŠØ¬Ø¨ Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø¹Ø¨Ø± ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù†');
            showLogin();
        }

        function logout() {
            currentUser = null;
            gameContainer.style.display = 'none';
            loginContainer.style.display = 'block';
            ambientSound.pause();
            ambientSound.currentTime = 0;
        }

        function updateUserDisplay() {
            if (!currentUser) return;
            
            currentUsername.textContent = currentUser.username;
            currentBalance.textContent = currentUser.balance;
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØµÙŠØ¯
            if (currentUser.balance === 0) {
                betSlider.min = 0;
                betSlider.max = 0;
                betSlider.value = 0;
                betSlider.disabled = true;
                
                customBetAmount.min = 0;
                customBetAmount.max = 0;
                customBetAmount.value = 0;
                customBetAmount.disabled = true;
                
                amountDisplay.textContent = '$0';
                amountDisplay.style.color = '#ff4444';
                
                startBtn.innerHTML = 'ğŸ’° Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø£ÙˆÙ„Ø§Ù‹';
                startBtn.disabled = true;
                startBtn.style.background = 'linear-gradient(45deg, #666, #999)';
                
                quickBetButtons.forEach(btn => {
                    btn.style.opacity = '0.5';
                    btn.style.cursor = 'not-allowed';
                    btn.onclick = null;
                });
                
                multiplierInfo.textContent = 'âš¡ Ø§Ù„Ø´Ø­Ù† Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡!';
                
            } else {
                betSlider.min = 1;
                betSlider.max = Math.min(currentUser.balance, 100);
                betSlider.value = Math.min(1, currentUser.balance);
                betSlider.disabled = false;
                
                customBetAmount.min = 1;
                customBetAmount.max = Math.min(currentUser.balance, 10000);
                customBetAmount.value = Math.min(1, currentUser.balance);
                customBetAmount.disabled = false;
                
                amountDisplay.textContent = formatAmount(Math.min(1, currentUser.balance));
                amountDisplay.style.color = '#00ff88';
                
                startBtn.innerHTML = 'ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©';
                startBtn.disabled = false;
                startBtn.style.background = 'linear-gradient(45deg, #00ff88, #00ccff)';
                
                quickBetButtons.forEach(btn => {
                    btn.style.opacity = '1';
                    btn.style.cursor = 'pointer';
                    const btnAmount = parseInt(btn.textContent.replace(/[^\d]/g, ''));
                    if (btnAmount <= currentUser.balance) {
                        btn.onclick = () => setBetAmount(btnAmount);
                    } else {
                        btn.style.opacity = '0.5';
                        btn.style.cursor = 'not-allowed';
                        btn.onclick = null;
                    }
                });
                
                multiplierInfo.textContent = 'Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ± ÙˆØ§Ø±Ø¨Ø­!';
                
                setBetAmount(Math.min(1, currentUser.balance));
            }
        }

        // ========== Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¯Ù…Ù† ==========
        function updateUsersTable() {
            if (!currentUser || !currentUser.isAdmin) return;
            
            usersTableBody.innerHTML = '';
            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.username} ${user.isAdmin ? 'ğŸ‘‘' : ''}</td>
                    <td>$${user.balance}</td>
                    <td>${user.isBanned ? 'ğŸš« Ù…Ø­Ø¸ÙˆØ±' : 'âœ… Ù†Ø´Ø·'}</td>
                    <td>
                        <button class="admin-action-btn add-balance-btn" onclick="adminAddBalanceTo('${user.username}')">â•</button>
                        <button class="admin-action-btn remove-balance-btn" onclick="adminRemoveBalanceFrom('${user.username}')">â–</button>
                        <button class="admin-action-btn ban-btn" onclick="adminToggleBan('${user.username}')">
                            ${user.isBanned ? 'ğŸ”“' : 'ğŸš«'}
                        </button>
                    </td>
                `;
                usersTableBody.appendChild(row);
            });
        }

        function updateCodesTable() {
            if (!currentUser || !currentUser.isAdmin) return;
            
            codesTableBody.innerHTML = '';
            chargeCodes.forEach((code, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${code.code}</td>
                    <td>$${code.amount}</td>
                    <td>${code.isUsed ? 'ğŸŸ¢ Ù…Ø³ØªØ®Ø¯Ù…' : 'ğŸ”´ ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù…'}</td>
                    <td>
                        <button class="admin-action-btn ban-btn" onclick="deleteChargeCode(${index})">
                            ğŸ—‘ï¸ Ø­Ø°Ù
                        </button>
                    </td>
                `;
                codesTableBody.appendChild(row);
            });
        }

        function adminAddBalance() {
            const username = document.getElementById('adminUsername').value.trim();
            const amount = parseInt(document.getElementById('adminAmount').value);
            
            if (!username || !amount || amount <= 0) {
                showMessage('âš ï¸ Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø©');
                return;
            }
            
            adminAddBalanceTo(username, amount);
        }

        function adminAddBalanceTo(username, amount = null) {
            if (!amount) {
                amount = parseInt(prompt(`Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù€ ${username}:`));
                if (!amount || amount <= 0) return;
            }
            
            const user = users.find(u => u.username === username);
            if (!user) {
                showMessage('âŒ Ø®Ø·Ø£', 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                return;
            }
            
            user.balance += amount;
            localStorage.setItem('users', JSON.stringify(users));
            
            if (currentUser.username === username) {
                currentUser.balance = user.balance;
                updateUserDisplay();
            }
            
            updateUsersTable();
            showMessage('âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©', `ØªÙ… Ø¥Ø¶Ø§ÙØ© $${amount} Ù„Ø­Ø³Ø§Ø¨ ${username}`);
        }

        function adminRemoveBalance() {
            const username = document.getElementById('adminUsername').value.trim();
            const amount = parseInt(document.getElementById('adminAmount').value);
            
            if (!username || !amount || amount <= 0) {
                showMessage('âš ï¸ Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø©');
                return;
            }
            
            adminRemoveBalanceFrom(username, amount);
        }

        function adminRemoveBalanceFrom(username, amount = null) {
            if (!amount) {
                amount = parseInt(prompt(`Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ø®ØµÙ…Ù‡ Ù…Ù† ${username}:`));
                if (!amount || amount <= 0) return;
            }
            
            const user = users.find(u => u.username === username);
            if (!user) {
                showMessage('âŒ Ø®Ø·Ø£', 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                return;
            }
            
            if (user.balance < amount) {
                showMessage('âŒ Ø®Ø·Ø£', 'Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± ÙƒØ§ÙÙŠ');
                return;
            }
            
            user.balance -= amount;
            localStorage.setItem('users', JSON.stringify(users));
            
            if (currentUser.username === username) {
                currentUser.balance = user.balance;
                updateUserDisplay();
            }
            
            updateUsersTable();
            showMessage('âœ… ØªÙ… Ø§Ù„Ø®ØµÙ…', `ØªÙ… Ø®ØµÙ… $${amount} Ù…Ù† Ø­Ø³Ø§Ø¨ ${username}`);
        }

        function adminBanUser() {
            const username = document.getElementById('adminUsername').value.trim();
            if (!username) {
                showMessage('âš ï¸ Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                return;
            }
            
            adminToggleBan(username);
        }

        function adminToggleBan(username) {
            const user = users.find(u => u.username === username);
            if (!user) {
                showMessage('âŒ Ø®Ø·Ø£', 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                return;
            }
            
            user.isBanned = !user.isBanned;
            localStorage.setItem('users', JSON.stringify(users));
            
            updateUsersTable();
            showMessage('âœ… ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„', `ØªÙ… ${user.isBanned ? 'Ø­Ø¸Ø±' : 'ÙÙƒ Ø­Ø¸Ø±'} ${username}`);
        }

        // ========== Ù†Ø¸Ø§Ù… Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø´Ø­Ù† ==========
        function generateChargeCode() {
            if (!currentUser || !currentUser.isAdmin) return;
            
            const amount = parseInt(document.getElementById('codeAmount').value);
            if (!amount || amount <= 0) {
                showMessage('âš ï¸ Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„ÙƒÙˆØ¯');
                return;
            }
            
            const code = 'CODE' + Math.random().toString(36).substr(2, 8).toUpperCase();
            chargeCodes.push({
                code: code,
                amount: amount,
                isUsed: false
            });
            
            localStorage.setItem('chargeCodes', JSON.stringify(chargeCodes));
            updateCodesTable();
            showMessage('âœ… ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡', `ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø´Ø­Ù† Ø¬Ø¯ÙŠØ¯:\nØ§Ù„ÙƒÙˆØ¯: ${code}\nØ§Ù„Ù‚ÙŠÙ…Ø©: $${amount}`);
        }

        function deleteChargeCode(index) {
            if (!currentUser || !currentUser.isAdmin) return;
            
            chargeCodes.splice(index, 1);
            localStorage.setItem('chargeCodes', JSON.stringify(chargeCodes));
            updateCodesTable();
            showMessage('âœ… ØªÙ… Ø§Ù„Ø­Ø°Ù', 'ØªÙ… Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­');
        }

        function useChargeCode() {
            if (!currentUser) return;
            
            const codeInput = document.getElementById('chargeCode').value.trim().toUpperCase();
            if (!codeInput) {
                showMessage('âš ï¸ Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù†');
                return;
            }
            
            const codeIndex = chargeCodes.findIndex(c => c.code === codeInput);
            if (codeIndex === -1) {
                showMessage('âŒ Ø®Ø·Ø£', 'ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù† ØºÙŠØ± ØµØ­ÙŠØ­');
                return;
            }
            
            const chargeCode = chargeCodes[codeIndex];
            if (chargeCode.isUsed) {
                showMessage('âŒ Ø®Ø·Ø£', 'Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø³Ø¨Ù‚Ø§Ù‹');
                return;
            }
            
            currentUser.balance += chargeCode.amount;
            chargeCode.isUsed = true;
            
            const userIndex = users.findIndex(u => u.username === currentUser.username);
            if (userIndex !== -1) {
                users[userIndex].balance = currentUser.balance;
            }
            
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('chargeCodes', JSON.stringify(chargeCodes));
            
            updateUserDisplay();
            if (currentUser.isAdmin) {
                updateCodesTable();
                updateUsersTable();
            }
            
            document.getElementById('chargeCode').value = '';
            showMessage('âœ… ØªÙ… Ø§Ù„Ø´Ø­Ù†', `ØªÙ… Ø´Ø­Ù† $${chargeCode.amount} Ø¨Ù†Ø¬Ø§Ø­!\nØ±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: $${currentUser.balance}\nÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨!`);
        }

        // ========== Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ==========
        function initializeGrid() {
            gameGrid.innerHTML = '';
            boxes = [];
            
            for(let i = 0; i < totalBoxes; i++) {
                boxes.push(i < bombCount ? 'bomb' : 'gem');
            }
            
            for(let i = boxes.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [boxes[i], boxes[j]] = [boxes[j], boxes[i]];
            }
            
            for(let i = 0; i < totalBoxes; i++) {
                const box = document.createElement('div');
                box.className = 'box';
                box.dataset.index = i;
                box.dataset.type = boxes[i];
                box.textContent = '?';
                
                box.addEventListener('click', () => revealBox(i));
                gameGrid.appendChild(box);
            }
        }

        function formatAmount(amount) {
            return '$' + amount.toLocaleString('en-US');
        }

        function setBetAmount(amount) {
            if (!currentUser || currentUser.balance === 0) return;
            
            const maxBet = Math.min(currentUser.balance, 10000);
            betAmount = Math.min(amount, maxBet);
            betSlider.value = Math.min(betAmount, 100);
            customBetAmount.value = betAmount;
            amountDisplay.textContent = formatAmount(betAmount);
            
            quickBetButtons.forEach(btn => {
                btn.classList.remove('active');
                const btnAmount = parseInt(btn.textContent.replace(/[^\d]/g, ''));
                if(btnAmount === betAmount) {
                    btn.classList.add('active');
                }
            });
            
            playSound('click');
        }

        function startGame() {
            if(gameActive || !currentUser || currentUser.balance === 0) return;
            
            const customAmount = parseInt(customBetAmount.value);
            if (customAmount && customAmount >= 1 && customAmount <= currentUser.balance) {
                betAmount = Math.min(customAmount, currentUser.balance);
                betSlider.value = Math.min(betAmount, 100);
                setBetAmount(betAmount);
            } else {
                betAmount = parseInt(betSlider.value);
            }
            
            if(betAmount < 1) {
                showMessage('âš ï¸ ØªÙ†Ø¨ÙŠÙ‡', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¨Ù„Øº Ø£ÙƒØ¨Ø± Ù…Ù† 0');
                return;
            }
            
            if(betAmount > currentUser.balance) {
                showMessage('âš ï¸ ØªÙ†Ø¨ÙŠÙ‡', 'Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠ Ù„Ù„Ø±Ù‡Ø§Ù† Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº');
                return;
            }
            
            originalBet = betAmount;
            profit = 0;
            multiplier = 1.0;
            gemsFound = 0;
            boxesRevealed = 0;
            
            gameActive = true;
            startBtn.disabled = true;
            withdrawBtn.disabled = false;
            
            initializeGrid();
            updateDisplay();
            updateMultiplierTrack();
            
            playSound('click');
            ambientSound.volume = 0.5;
            
            showMessage(
                'ğŸ® Ù…ØºØ§Ù…Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©!',
                `Ù„Ù‚Ø¯ Ø±Ø§Ù‡Ù†Øª Ø¨Ù…Ø¨Ù„Øº ${formatAmount(originalBet)}<br>
                Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± Ø¨Ø°ÙƒØ§Ø¡ ÙˆØªØ¬Ù†Ø¨ Ø§Ù„Ù‚Ù†Ø§Ø¨Ù„!<br><br>
                <span style="color:#00ccff">ÙƒÙ„ Ø¬ÙˆÙ‡Ø±Ø© ØªØ²ÙŠØ¯ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ù…Ù† 5% Ø¥Ù„Ù‰ 15%</span>`,
                'ğŸ”®'
            );
        }

        function revealBox(index) {
            if(!gameActive || !currentUser) return;
            
            const box = document.querySelector(`.box[data-index="${index}"]`);
            if(box.classList.contains('revealed')) return;
            
            boxesRevealed++;
            const type = box.dataset.type;
            
            playSound('click');
            box.classList.add('revealed');
            
            setTimeout(() => {
                if(type === 'gem') {
                    revealGem(box);
                } else {
                    revealBomb(box);
                }
            }, 300);
        }

        function revealGem(box) {
            box.textContent = 'ğŸ’';
            box.classList.add('gem');
            
            gemsFound++;
            
            const increment = 1 + (Math.random() * 0.1 + 0.05);
            multiplier = parseFloat((multiplier * increment).toFixed(2));
            
            if(multiplier > 3.0) multiplier = 3.0;
            
            profit = Math.round(originalBet * multiplier - originalBet);
            
            playSound('gem');
            updateDisplay();
            updateMultiplierTrack();
            
            multiplierInfo.innerHTML = `
                Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ø­Ø§Ù„ÙŠ: <span style="color:#00ff88">${multiplier.toFixed(2)}x</span> | 
                Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±: <span style="color:#00ccff">${gemsFound}</span> / ${gemCount}
            `;
            
            if(gemsFound === gemCount) {
                setTimeout(() => {
                    winGame();
                }, 1500);
            }
        }

        function revealBomb(box) {
            box.textContent = 'ğŸ’£';
            box.classList.add('bomb');
            
            playSound('bomb');
            
            setTimeout(() => {
                document.querySelectorAll('.box').forEach((b, index) => {
                    if(b.dataset.type === 'bomb' && !b.classList.contains('revealed')) {
                        setTimeout(() => {
                            b.textContent = 'ğŸ’£';
                            b.classList.add('revealed', 'bomb');
                        }, index * 200);
                    }
                });
            }, 500);
            
            setTimeout(() => {
                loseGame();
            }, 2000);
        }

        function winGame() {
            gameActive = false;
            
            const totalWin = originalBet + profit;
            currentUser.balance += profit;
            
            const userIndex = users.findIndex(u => u.username === currentUser.username);
            if (userIndex !== -1) {
                users[userIndex].balance = currentUser.balance;
            }
            localStorage.setItem('users', JSON.stringify(users));
            
            updateUserDisplay();
            if (currentUser.isAdmin) {
                updateUsersTable();
            }
            
            playSound('win');
            
            showMessage(
                'ğŸ† ÙÙˆØ² Ù…Ø°Ù‡Ù„!',
                `Ù„Ù‚Ø¯ ÙˆØ¬Ø¯Øª ÙƒÙ„ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±!<br><br>
                 ğŸ’ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±: ${gemsFound}<br>
                 ğŸ“ˆ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: <span style="color:#00ff88">${multiplier.toFixed(2)}x</span><br>
                 ğŸ’° Ø§Ù„Ø±Ø¨Ø­: <span style="color:#00ff88">${formatAmount(profit)}</span><br>
                 ğŸ’µ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span style="color:#00ccff">${formatAmount(totalWin)}</span><br><br>
                 Ù…Ù‡Ø§Ø±Ø© Ø±Ø§Ø¦Ø¹Ø©!`,
                'ğŸŠ'
            );
            
            resetGame();
        }

        function loseGame() {
            gameActive = false;
            profit = -originalBet;
            
            currentUser.balance -= originalBet;
            
            const userIndex = users.findIndex(u => u.username === currentUser.username);
            if (userIndex !== -1) {
                users[userIndex].balance = currentUser.balance;
            }
            localStorage.setItem('users', JSON.stringify(users));
            
            updateUserDisplay();
            if (currentUser.isAdmin) {
                updateUsersTable();
            }
            
            playSound('bomb');
            
            showMessage(
                'ğŸ’¥ Ø§Ù†ÙØ¬Ø§Ø±!',
                `Ù„Ù‚Ø¯ ÙˆÙ‚Ø¹Øª Ø¹Ù„Ù‰ Ù‚Ù†Ø¨Ù„Ø©!<br><br>
                 ğŸ˜ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± Ø§Ù„ØªÙŠ ÙˆØ¬Ø¯ØªÙ‡Ø§: ${gemsFound}<br>
                 ğŸ’¸ Ø§Ù„Ø®Ø³Ø§Ø±Ø©: <span style="color:#ff4444">${formatAmount(originalBet)}</span><br><br>
                 ğŸ’¡ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø­Ø°Ø± Ø£ÙƒØ«Ø±!`,
                'ğŸ’£'
            );
            
            updateDisplay();
            resetGame();
        }

        function withdraw() {
            if(!gameActive || profit <= 0 || !currentUser) return;
            
            gameActive = false;
            
            const totalWin = originalBet + profit;
            currentUser.balance += profit;
            
            const userIndex = users.findIndex(u => u.username === currentUser.username);
            if (userIndex !== -1) {
                users[userIndex].balance = currentUser.balance;
            }
            localStorage.setItem('users', JSON.stringify(users));
            
            updateUserDisplay();
            if (currentUser.isAdmin) {
                updateUsersTable();
            }
            
            playSound('cash');
            
            const profitPercentage = ((profit / originalBet) * 100).toFixed(1);
            
            showMessage(
                'ğŸ’° Ø§Ù†Ø³Ø­Ø§Ø¨ Ø°ÙƒÙŠ',
                `Ù„Ù‚Ø¯ Ø§Ù†Ø³Ø­Ø¨Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨!<br><br>
                 ğŸ’ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±: ${gemsFound}<br>
                 ğŸ“ˆ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù: <span style="color:#00ff88">${multiplier.toFixed(2)}x</span><br>
                 ğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­: <span style="color:#00ccff">${profitPercentage}%</span><br>
                 ğŸ† Ø§Ù„Ø±Ø¨Ø­: <span style="color:#00ff88">${formatAmount(profit)}</span><br>
                 ğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: <span style="color:#00ccff">${formatAmount(totalWin)}</span><br><br>
                 Ù‚Ø±Ø§Ø± Ø­ÙƒÙŠÙ…!`,
                'ğŸ’'
            );
            
            resetGame();
        }

        function updateDisplay() {
            originalAmount.textContent = formatAmount(originalBet);
            currentProfit.textContent = formatAmount(profit);
            totalAmount.textContent = formatAmount(originalBet + profit);
            currentMultiplier.textContent = `${multiplier.toFixed(2)}x`;
            
            const profitElement = document.getElementById('currentProfit');
            profitElement.className = 'stat-value';
            if(profit > 0) {
                profitElement.classList.add('profit-positive');
            } else if(profit < 0) {
                profitElement.classList.add('profit-negative');
            }
        }

        function updateMultiplierTrack() {
            const progress = (gemsFound / gemCount) * 100;
            multiplierFill.style.width = `${progress}%`;
        }

        function resetGame() {
            gameActive = false;
            startBtn.disabled = false;
            withdrawBtn.disabled = true;
            multiplierFill.style.width = '0%';
            
            setTimeout(() => {
                if (currentUser && currentUser.balance > 0) {
                    multiplierInfo.textContent = 'Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ± ÙˆØ§Ø±Ø¨Ø­!';
                } else {
                    multiplierInfo.textContent = 'âš¡ Ø§Ù„Ø´Ø­Ù† Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡!';
                }
            }, 1000);
        }

        // ========== Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ==========
        function showMessage(title, text, icon = 'ğŸ’') {
            messageIcon.textContent = icon;
            messageTitle.textContent = title;
            messageText.innerHTML = text;
            messageOverlay.style.display = 'flex';
        }

        function closeMessage() {
            messageOverlay.style.display = 'none';
            playSound('click');
        }

        function playSound(type) {
            try {
                const sounds = {
                    'ambient': ambientSound,
                    'click': document.getElementById('clickSound'),
                    'gem': document.getElementById('gemSound'),
                    'bomb': document.getElementById('bombSound'),
                    'win': document.getElementById('winSound'),
                    'cash': document.getElementById('cashSound')
                };
                
                if(sounds[type]) {
                    sounds[type].currentTime = 0;
                    sounds[type].play().catch(e => console.log("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª"));
                }
            } catch(e) {
                console.log("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª");
            }
        }

        // ========== Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ==========
        betSlider.addEventListener('input', () => {
            if (!currentUser || currentUser.balance === 0) return;
            
            betAmount = parseInt(betSlider.value);
            const maxBet = Math.min(currentUser.balance, 10000);
            betAmount = Math.min(betAmount, maxBet);
            
            customBetAmount.value = betAmount;
            amountDisplay.textContent = formatAmount(betAmount);
            
            quickBetButtons.forEach(btn => {
                btn.classList.remove('active');
                const btnAmount = parseInt(btn.textContent.replace(/[^\d]/g, ''));
                if(btnAmount === betAmount) {
                    btn.classList.add('active');
                }
            });
        });

        customBetAmount.addEventListener('input', () => {
            if (!currentUser || currentUser.balance === 0) return;
            
            let amount = parseInt(customBetAmount.value);
            if (isNaN(amount)) amount = 1;
            
            const maxBet = Math.min(currentUser.balance, 10000);
            amount = Math.min(Math.max(amount, 1), maxBet);
            
            betAmount = amount;
            betSlider.value = Math.min(amount, 100);
            amountDisplay.textContent = formatAmount(amount);
            
            quickBetButtons.forEach(btn => {
                btn.classList.remove('active');
                const btnAmount = parseInt(btn.textContent.replace(/[^\d]/g, ''));
                if(btnAmount === betAmount) {
                    btn.classList.add('active');
                }
            });
        });

        customBetAmount.addEventListener('change', () => {
            if (!currentUser || currentUser.balance === 0) return;
            
            let amount = parseInt(customBetAmount.value);
            if (isNaN(amount)) {
                amount = 1;
                customBetAmount.value = 1;
            }
            
            const maxBet = Math.min(currentUser.balance, 10000);
            amount = Math.min(Math.max(amount, 1), maxBet);
            
            betAmount = amount;
            betSlider.value = Math.min(amount, 100);
            amountDisplay.textContent = formatAmount(amount);
            
            quickBetButtons.forEach(btn => {
                btn.classList.remove('active');
                const btnAmount = parseInt(btn.textContent.replace(/[^\d]/g, ''));
                if(btnAmount === betAmount) {
                    btn.classList.add('active');
                }
            });
        });

        messageOverlay.addEventListener('click', (e) => {
            if(e.target === messageOverlay) {
                closeMessage();
            }
        });

        document.addEventListener('click', () => {
            ambientSound.play().catch(() => {});
            document.removeEventListener('click', arguments.callee);
        }, { once: true });

        window.addEventListener('load', () => {
            document.querySelector('.container').style.animation = 'containerGlow 2s ease-out';
            showMessage(
                'ğŸ® Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ±!',
                'Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ÙˆØ§Ù„Ù‚Ù†Ø§Ø¨Ù„<br>ÙŠØ¬Ø¨ Ø´Ø­Ù† Ø±ØµÙŠØ¯Ùƒ Ø£ÙˆÙ„Ø§Ù‹ Ø¹Ø¨Ø± Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø´Ø­Ù†',
                'ğŸ’'
            );
        });
    </script>
</body>
</html>